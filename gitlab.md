## monitoring

### process

- https://maku77.github.io/git/gitlab/service-list.html

```
GitLab 関連サービスの一覧を表示
$ sudo gitlab-ctl service-list
nginx*
postgresql*
redis*
sidekiq*
unicorn*
GitLab 関連サービスの動作状態を確認
$ sudo gitlab-ctl status
run: nginx: (pid 11059) 597s; run: log: (pid 11058) 597s
run: postgresql: (pid 10971) 632s; run: log: (pid 10970) 632s
run: redis: (pid 10890) 638s; run: log: (pid 10889) 638s
run: sidekiq: (pid 11043) 599s; run: log: (pid 11042) 599s
run: unicorn: (pid 11031) 601s; run: log: (pid 11030) 601s
実際に ps コマンドで確認してみると、GitLab に関連するプロセスがたくさん起動していることが分かります。

$ ps axo '%U %c %a' | grep gitlab
root     runsvdir        runsvdir -P /opt/gitlab/service log: ......
root     svlogd          svlogd -tt /var/log/gitlab/redis
999      redis-server    /opt/gitlab/embedded/bin/redis-server 127.0.0.1:6379
root     svlogd          svlogd -tt /var/log/gitlab/postgresql
998      postgres        /opt/gitlab/embedded/bin/postgres -D /var/opt/gitlab/postgresql/data
root     svlogd          svlogd -tt /var/log/gitlab/unicorn
git      ruby            unicorn master -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
root     svlogd          svlogd -tt /var/log/gitlab/sidekiq
git      ruby            sidekiq 2.17.0 gitlab-rails [0 of 25 busy]
root     svlogd          svlogd -tt /var/log/gitlab/nginx
root     nginx           nginx: master process /opt/gitlab/embedded/sbin/nginx -c /var/opt/gitlab/nginx/etc/nginx.conf
git      ruby            unicorn worker[0] -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
git      ruby            unicorn worker[1] -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
998      postgres        postgres: gitlab gitlabhq_production 127.0.0.1(60943) idle
maku     grep            grep --color=auto gitlab
```

- gitlab-ctl status

```
[hmizuno@gitlab-01 ~]$ sudo gitlab-ctl service-list

alertmanager*
gitaly*
gitlab-monitor*
gitlab-workhorse*
logrotate*
nginx*
node-exporter*
postgres-exporter*
postgresql*
prometheus*
redis*
redis-exporter*
sidekiq*
unicorn*

[hmizuno@gitlab-01 ~]$ sudo gitlab-ctl status

run: alertmanager: (pid 1049) 2745s; run: log: (pid 1048) 2745s
run: gitaly: (pid 1042) 2745s; run: log: (pid 1041) 2745s
run: gitlab-monitor: (pid 1044) 2745s; run: log: (pid 1043) 2745s
run: gitlab-workhorse: (pid 1030) 2745s; run: log: (pid 1029) 2745s
run: logrotate: (pid 1055) 2745s; run: log: (pid 1054) 2745s
run: nginx: (pid 1060) 2745s; run: log: (pid 1057) 2745s
run: node-exporter: (pid 1038) 2745s; run: log: (pid 1037) 2745s
run: postgres-exporter: (pid 1059) 2745s; run: log: (pid 1058) 2745s
run: postgresql: (pid 1024) 2747s; run: log: (pid 1023) 2747s
run: prometheus: (pid 1047) 2745s; run: log: (pid 1046) 2745s
run: redis: (pid 1014) 2749s; run: log: (pid 1013) 2749s
run: redis-exporter: (pid 1056) 2745s; run: log: (pid 1045) 2745s
run: sidekiq: (pid 1021) 2749s; run: log: (pid 1019) 2749s
run: unicorn: (pid 1020) 2749s; run: log: (pid 1018) 2749s

[hmizuno@gitlab-01 ~]$ sudo gitlab-ctl -help
omnibus-ctl: command (subcommand)
check-config
  Check if there are any configuration in gitlab.rb that is removed in specified version
deploy-page
  Put up the deploy page
diff-config
  Compare the user configuration with package available configuration
prometheus-upgrade
  Upgrade the Prometheus data to the latest supported version
remove-accounts
  Delete *all* users and groups used by this package
upgrade
  Run migrations after a package upgrade
General Commands:
  cleanse
    Delete *all* gitlab data, and start from scratch.
  help
    Print this help message.
  reconfigure
    Reconfigure the application.
  show-config
    Show the configuration that would be generated by reconfigure.
  uninstall
    Kill all processes and uninstall the process supervisor (data will be preserved).
Service Management Commands:
  graceful-kill
    Attempt a graceful stop, then SIGKILL the entire process group.
  hup
    Send the services a HUP.
  int
    Send the services an INT.
  kill
    Send the services a KILL.
  once
    Start the services if they are down. Do not restart them if they stop.
  restart
    Stop the services if they are running, then start them again.
  service-list
    List all the services (enabled services appear with a *.)
  start
    Start services if they are down, and restart them if they stop.
  status
    Show the status of all the services.
  stop
    Stop the services, and do not restart them.
  tail
    Watch the service logs of all enabled services.
  term
    Send the services a TERM.
  usr1
    Send the services a USR1.
  usr2
    Send the services a USR2.
Let's Encrypt Commands:
  renew-le-certs
    Renew the existing Let's Encrypt certificates
Database Commands:
  pg-password-md5
    Generate MD5 Hash of user password in PostgreSQL format
  pg-upgrade
    Upgrade the PostgreSQL DB to the latest supported version
  repmgr
    Manage repmgr PostgreSQL cluster nodes
  repmgr-check-master
    Check if the current node is the repmgr master
  repmgr-event-handler
    Handle events from rpmgrd actions
  revert-pg-upgrade
    Run this to revert to the previous version of the database
  set-replication-password
    Set database replication password
  write-pgpass
    Write a pgpass file for the specified user
Container Registry Commands:
  registry-garbage-collect
    Run Container Registry garbage collection.
Consul Commands:
  consul
    Interact with the gitlab-consul cluster
Pgbouncer Commands:
  pgb-console
    Connect to the pgbouncer console
  pgb-kill
    Send the "resume" command to pgbouncer
  pgb-notify
    Notify pgbouncer of an update to its database
  pgb-resume
    Send the "resume" command to pgbouncer
  pgb-suspend
    Send the "suspend" command to pgbouncer
Gitlab Geo Commands:
  promote-to-primary-node
    Promote to primary node
  replicate-geo-database
    Replicate Geo database
  set-geo-primary-node
    Make this node the Geo primary

```

- process summary

```
[hmizuno@gitlab-01 ~]$ ps -ef |grep gitlab |cut -c51-100 |sort

* /bin/bash /opt/gitlab/embedded/bin/gitlab-unicorn-wrapper
* /bin/sh /opt/gitlab/embedded/bin/gitlab-logrotate-wrapper
* /opt/gitlab/embedded/bin/alertmanager
* /opt/gitlab/embedded/bin/gitaly
* /opt/gitlab/embedded/bin/gitlab-workhorse
* /opt/gitlab/embedded/bin/node_exporter
* /opt/gitlab/embedded/bin/postgres
* /opt/gitlab/embedded/bin/postgres_exporter
* /opt/gitlab/embedded/bin/prometheus
* /opt/gitlab/embedded/bin/redis_exporter
* /opt/gitlab/embedded/bin/redis-server
* ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby 1042 /tmp/gitaly-ruby122251670/socket.0
* ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby 1042 /tmp/gitaly-ruby122251670/socket.1


* runsvdir
* runsv gitlab-monitor
* runsv gitlab-workhorse
* svlogd -tt /var/log/gitlab/alertmanager
* svlogd -tt /var/log/gitlab/gitaly
* svlogd -tt /var/log/gitlab/gitlab-monitor
* svlogd -tt /var/log/gitlab/gitlab-workhorse
* svlogd -tt /var/log/gitlab/logrotate
* svlogd -tt /var/log/gitlab/nginx
* svlogd -tt /var/log/gitlab/node-exporter
* svlogd -tt /var/log/gitlab/postgres-exporter
* svlogd -tt /var/log/gitlab/postgresql
* svlogd -tt /var/log/gitlab/prometheus
* svlogd -tt /var/log/gitlab/redis
* svlogd -tt /var/log/gitlab/redis-exporter
* svlogd -tt /var/log/gitlab/sidekiq
* svlogd -tt /var/log/gitlab/unicorn

* sidekiq 5.2.5 gitlab-rails [0 of 25 busy]

* unicorn master -D -E production -c /var/opt/gitlab
* unicorn worker[0] -D -E production -c /var/opt/git
* unicorn worker[1] -D -E production -c /var/opt/git
* unicorn worker[2] -D -E production -c /var/opt/git

* puma 3.12.0 (tcp://localhost:9168) [gitlab-monitor

* nginx: master process /opt/gitlab/embedded/sbin/nginx -p /var/opt/gitlab/nginx
* nginx: worker process
* nginx: worker process
* nginx: cache manager process

* postgres: autovacuum launcher process
* postgres: checkpointer process
* postgres: gitlab gitlabhq_production [local] idle
* postgres: gitlab gitlabhq_production [local] idle
* postgres: gitlab gitlabhq_production [local] idle
* postgres: gitlab gitlabhq_production [local] idle
* postgres: gitlab gitlabhq_production [local] idle
* postgres: gitlab gitlabhq_production [local] idle
* postgres: gitlab gitlabhq_production [local] idle
* postgres: gitlab gitlabhq_production [local] idle
* postgres: gitlab gitlabhq_production [local] idle
* postgres: gitlab gitlabhq_production [local] idle
* postgres: gitlab-psql postgres [local] idle
* postgres: stats collector process
* postgres: wal writer process
* postgres: writer process


```

```
[hmizuno@gitlab-01 ~]$ ps -ef
UID         PID   PPID  C STIME TTY          TIME CMD
root          1      0  4 22:51 ?        00:00:07 /usr/lib/systemd/systemd --switched-root --system --deserialize
root          2      0  0 22:51 ?        00:00:00 [kthreadd]
root          3      2  0 22:51 ?        00:00:00 [ksoftirqd/0]
root          4      2  0 22:51 ?        00:00:00 [kworker/0:0]
root          5      2  0 22:51 ?        00:00:00 [kworker/0:0H]
root          6      2  0 22:51 ?        00:00:00 [kworker/u256:0]
root          7      2  0 22:51 ?        00:00:00 [migration/0]
root          8      2  0 22:51 ?        00:00:00 [rcu_bh]
root          9      2  0 22:51 ?        00:00:00 [rcu_sched]
root         10      2  0 22:51 ?        00:00:00 [lru-add-drain]
root         11      2  0 22:51 ?        00:00:00 [watchdog/0]
root         12      2  0 22:51 ?        00:00:00 [watchdog/1]
root         13      2  0 22:51 ?        00:00:00 [migration/1]
root         14      2  0 22:51 ?        00:00:00 [ksoftirqd/1]
root         15      2  0 22:51 ?        00:00:00 [kworker/1:0]
root         16      2  0 22:51 ?        00:00:00 [kworker/1:0H]
root         18      2  0 22:51 ?        00:00:00 [kdevtmpfs]
root         19      2  0 22:51 ?        00:00:00 [netns]
root         20      2  0 22:51 ?        00:00:00 [khungtaskd]
root         21      2  0 22:51 ?        00:00:00 [writeback]
root         22      2  0 22:51 ?        00:00:00 [kintegrityd]
root         23      2  0 22:51 ?        00:00:00 [bioset]
root         24      2  0 22:51 ?        00:00:00 [bioset]
root         25      2  0 22:51 ?        00:00:00 [bioset]
root         26      2  0 22:51 ?        00:00:00 [kblockd]
root         27      2  0 22:51 ?        00:00:00 [md]
root         28      2  0 22:51 ?        00:00:00 [edac-poller]
root         29      2  0 22:51 ?        00:00:00 [kworker/0:1]
root         34      2  0 22:51 ?        00:00:00 [kswapd0]
root         35      2  0 22:51 ?        00:00:00 [ksmd]
root         36      2  0 22:51 ?        00:00:00 [khugepaged]
root         37      2  0 22:51 ?        00:00:00 [crypto]
root         45      2  0 22:51 ?        00:00:00 [kthrotld]
root         46      2  0 22:51 ?        00:00:00 [kworker/u256:1]
root         47      2  0 22:51 ?        00:00:00 [kmpath_rdacd]
root         48      2  0 22:51 ?        00:00:00 [kaluad]
root         49      2  0 22:51 ?        00:00:00 [kpsmoused]
root         50      2  0 22:51 ?        00:00:00 [kworker/0:2]
root         51      2  0 22:51 ?        00:00:00 [ipv6_addrconf]
root         52      2  0 22:51 ?        00:00:00 [kworker/1:1]
root         65      2  0 22:51 ?        00:00:00 [deferwq]
root        170      2  0 22:51 ?        00:00:00 [kauditd]
root        220      2  0 22:51 ?        00:00:00 [hv_vmbus_con]
root        224      2  0 22:51 ?        00:00:00 [ata_sff]
root        235      2  0 22:51 ?        00:00:00 [scsi_eh_0]
root        236      2  0 22:51 ?        00:00:00 [scsi_tmf_0]
root        237      2  0 22:51 ?        00:00:00 [scsi_eh_1]
root        238      2  0 22:51 ?        00:00:00 [scsi_tmf_1]
root        239      2  0 22:51 ?        00:00:00 [kworker/u256:2]
root        240      2  0 22:51 ?        00:00:00 [kworker/u256:3]
root        252      2  0 22:51 ?        00:00:00 [kworker/0:3]
root        253      2  0 22:51 ?        00:00:00 [kworker/0:4]
root        254      2  0 22:51 ?        00:00:00 [scsi_eh_2]
root        255      2  0 22:51 ?        00:00:00 [scsi_tmf_2]
root        257      2  0 22:51 ?        00:00:00 [storvsc_error_w]
root        258      2  0 22:51 ?        00:00:00 [scsi_eh_3]
root        259      2  0 22:51 ?        00:00:00 [scsi_tmf_3]
root        260      2  0 22:51 ?        00:00:00 [storvsc_error_w]
root        261      2  0 22:51 ?        00:00:00 [scsi_eh_4]
root        262      2  0 22:51 ?        00:00:00 [scsi_tmf_4]
root        263      2  0 22:51 ?        00:00:00 [storvsc_error_w]
root        264      2  0 22:51 ?        00:00:00 [scsi_eh_5]
root        265      2  0 22:51 ?        00:00:00 [scsi_tmf_5]
root        266      2  0 22:51 ?        00:00:00 [storvsc_error_w]
root        274      2  0 22:51 ?        00:00:00 [kworker/1:2]
root        283      2  0 22:51 ?        00:00:00 [bioset]
root        284      2  0 22:51 ?        00:00:00 [xfsalloc]
root        285      2  0 22:51 ?        00:00:00 [xfs_mru_cache]
root        286      2  0 22:51 ?        00:00:00 [xfs-buf/sda2]
root        287      2  0 22:51 ?        00:00:00 [xfs-data/sda2]
root        288      2  0 22:51 ?        00:00:00 [xfs-conv/sda2]
root        289      2  0 22:51 ?        00:00:00 [xfs-cil/sda2]
root        290      2  0 22:51 ?        00:00:00 [xfs-reclaim/sda]
root        291      2  0 22:51 ?        00:00:00 [xfs-log/sda2]
root        292      2  0 22:51 ?        00:00:00 [xfs-eofblocks/s]
root        293      2  0 22:51 ?        00:00:00 [xfsaild/sda2]
root        294      2  0 22:51 ?        00:00:00 [kworker/0:1H]
root        350      2  0 22:51 ?        00:00:00 [kworker/1:1H]
root        364      1  0 22:51 ?        00:00:01 /usr/lib/systemd/systemd-journald
root        390      1  0 22:51 ?        00:00:00 /usr/sbin/lvmetad -f
root        399      1  0 22:51 ?        00:00:00 /usr/lib/systemd/systemd-udevd
root        415      2  0 22:51 ?        00:00:00 [hv_balloon]
root        431      2  0 22:51 ?        00:00:00 [xfs-buf/sda1]
root        432      2  0 22:51 ?        00:00:00 [xfs-data/sda1]
root        433      2  0 22:51 ?        00:00:00 [xfs-conv/sda1]
root        434      2  0 22:51 ?        00:00:00 [xfs-cil/sda1]
root        435      2  0 22:51 ?        00:00:00 [xfs-reclaim/sda]
root        436      2  0 22:51 ?        00:00:00 [xfs-log/sda1]
root        437      2  0 22:51 ?        00:00:00 [xfs-eofblocks/s]
root        438      2  0 22:51 ?        00:00:00 [xfsaild/sda1]
root        475      2  0 22:51 ?        00:00:00 [kvm-irqfd-clean]
root        506      1  0 22:51 ?        00:00:00 /sbin/auditd
libstor+    530      1  0 22:51 ?        00:00:00 /usr/bin/lsmd -d
root        531      1  0 22:51 ?        00:00:00 /usr/lib/systemd/systemd-logind
root        532      1  0 22:51 ?        00:00:00 /sbin/rngd -f
root        533      1  0 22:51 ?        00:00:00 /usr/sbin/hypervvssd -n
root        534      1  0 22:51 ?        00:00:00 /usr/sbin/irqbalance --foreground
root        537      1  0 22:51 ?        00:00:00 /usr/sbin/smartd -n -q never
polkitd     538      1  0 22:51 ?        00:00:00 /usr/lib/polkit-1/polkitd --no-debug
dbus        539      1  0 22:51 ?        00:00:00 /usr/bin/dbus-daemon --system --address=systemd: --nofork --nopi
chrony      544      1  0 22:51 ?        00:00:00 /usr/sbin/chronyd
root        552      1  0 22:51 ?        00:00:00 /usr/sbin/NetworkManager --no-daemon
root        571      1  0 22:51 ?        00:00:00 /usr/sbin/crond -n
root        572      1  0 22:51 ?        00:00:00 /usr/sbin/atd -f
root        577      1  0 22:51 ttyS0    00:00:00 /sbin/agetty --keep-baud 115200 38400 9600 ttyS0 vt220
root        578      1  0 22:51 tty1     00:00:00 /sbin/agetty --noclear tty1 linux
rpc         580      1  0 22:51 ?        00:00:00 /sbin/rpcbind -w
root        766      2  0 22:52 ?        00:00:00 [kworker/1:3]
root        829      1  0 22:52 ?        00:00:00 /sbin/dhclient -q -lf /var/lib/dhclient/dhclient--eth0.lease -pf
root        885      1  0 22:52 ?        00:00:00 /usr/sbin/hypervkvpd -n
root        887      1  0 22:52 ?        00:00:00 /usr/sbin/sshd -D
root        888      1  0 22:52 ?        00:00:00 /usr/bin/python -Es /usr/sbin/tuned -l -P
root        890      1  0 22:52 ?        00:00:00 /usr/bin/python -u /usr/sbin/waagent -daemon
root        891      1  0 22:52 ?        00:00:00 /usr/sbin/rsyslogd -n
root        974      1  0 22:52 ?        00:00:00 /usr/libexec/postfix/master -w
postfix     976    974  0 22:52 ?        00:00:00 pickup -l -t unix -u
postfix     977    974  0 22:52 ?        00:00:00 qmgr -l -t unix -u
postfix     993    974  0 22:52 ?        00:00:00 smtp -t unix -u
root        999      1  0 22:52 ?        00:00:00 runsvdir -P /opt/gitlab/service log: ...........................
root       1012    999  0 22:52 ?        00:00:00 runsv redis
root       1013   1012  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/redis
gitlab-+   1014   1012  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/redis-server 127.0.0.1:0
root       1015    999  0 22:52 ?        00:00:00 runsv postgresql
root       1016    999  0 22:52 ?        00:00:00 runsv unicorn
root       1017    999  0 22:52 ?        00:00:00 runsv sidekiq
root       1018   1016  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/unicorn
root       1019   1017  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/sidekiq
git        1020   1016  0 22:52 ?        00:00:00 /bin/bash /opt/gitlab/embedded/bin/gitlab-unicorn-wrapper
git        1021   1017 34 22:52 ?        00:00:42 sidekiq 5.2.5 gitlab-rails [0 of 25 busy]
root       1022    999  0 22:52 ?        00:00:00 runsv gitlab-workhorse
root       1023   1015  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/postgresql
gitlab-+   1024   1015  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/postgres -D /var/opt/gitlab/postgresql/
root       1028    999  0 22:52 ?        00:00:00 runsv nginx
root       1029   1022  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/gitlab-workhorse
git        1030   1022  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/gitlab-workhorse -listenNetwork unix -l
root       1031    999  0 22:52 ?        00:00:00 runsv logrotate
root       1032    999  0 22:52 ?        00:00:00 runsv gitaly
root       1033    999  0 22:52 ?        00:00:00 runsv node-exporter
root       1034    999  0 22:52 ?        00:00:00 runsv gitlab-monitor
root       1035    999  0 22:52 ?        00:00:00 runsv redis-exporter
root       1036    999  0 22:52 ?        00:00:00 runsv prometheus
root       1037   1033  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/node-exporter
gitlab-+   1038   1033  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/node_exporter --web.listen-address=loca
root       1039    999  0 22:52 ?        00:00:00 runsv alertmanager
root       1040    999  0 22:52 ?        00:00:00 runsv postgres-exporter
root       1041   1032  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/gitaly
git        1042   1032  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/gitaly /var/opt/gitlab/gitaly/config.to
root       1043   1034  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/gitlab-monitor
git        1044   1034  1 22:52 ?        00:00:01 puma 3.12.0 (tcp://localhost:9168) [gitlab-monitor]
root       1045   1035  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/redis-exporter
root       1046   1036  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/prometheus
gitlab-+   1047   1036  7 22:52 ?        00:00:09 /opt/gitlab/embedded/bin/prometheus --web.listen-address=localho
root       1048   1039  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/alertmanager
gitlab-+   1049   1039  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/alertmanager --web.listen-address=local
root       1054   1031  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/logrotate
root       1055   1031  0 22:52 ?        00:00:00 /bin/sh /opt/gitlab/embedded/bin/gitlab-logrotate-wrapper
gitlab-+   1056   1035  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/redis_exporter --web.listen-address=loc
root       1057   1028  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/nginx
root       1058   1040  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/postgres-exporter
gitlab-+   1059   1040  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/postgres_exporter --web.listen-address=
root       1060   1028  0 22:52 ?        00:00:00 nginx: master process /opt/gitlab/embedded/sbin/nginx -p /var/op
root       1068   1055  0 22:52 ?        00:00:00 sleep 600
gitlab-+   1126   1060  0 22:52 ?        00:00:00 nginx: worker process
gitlab-+   1127   1060  0 22:52 ?        00:00:00 nginx: worker process
gitlab-+   1128   1060  0 22:52 ?        00:00:00 nginx: cache manager process
root       1133      2  0 22:52 ?        00:00:00 [jbd2/sdb1-8]
root       1134      2  0 22:52 ?        00:00:00 [ext4-rsv-conver]
root       1139    890  0 22:52 ?        00:00:01 python -u bin/WALinuxAgent-2.2.37-py2.7.egg -run-exthandlers
gitlab-+   1154   1024  0 22:52 ?        00:00:00 postgres: checkpointer process
gitlab-+   1155   1024  0 22:52 ?        00:00:00 postgres: writer process
gitlab-+   1156   1024  0 22:52 ?        00:00:00 postgres: wal writer process
gitlab-+   1157   1024  0 22:52 ?        00:00:00 postgres: autovacuum launcher process
gitlab-+   1158   1024  0 22:52 ?        00:00:00 postgres: stats collector process
git        1188   1042  2 22:52 ?        00:00:02 ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby 10
git        1193   1042  2 22:52 ?        00:00:02 ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby 10
gitlab-+   1204   1024  0 22:52 ?        00:00:00 postgres: gitlab-psql postgres [local] idle
git        1210      1 42 22:52 ?        00:00:43 unicorn master -D -E production -c /var/opt/gitlab/gitlab-rails/
postfix    1231    974  0 22:52 ?        00:00:00 bounce -z -n defer -t unix -u
gitlab-+   1315   1024  0 22:52 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
gitlab-+   1320   1024  0 22:52 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
gitlab-+   1322   1024  0 22:52 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
root       1393    887  0 22:53 ?        00:00:00 sshd: hmizuno [priv]
git        1443   1210  1 22:53 ?        00:00:00 unicorn worker[0] -D -E production -c /var/opt/gitlab/gitlab-rai
git        1446   1210  1 22:53 ?        00:00:00 unicorn worker[1] -D -E production -c /var/opt/gitlab/gitlab-rai
git        1449   1210  1 22:53 ?        00:00:00 unicorn worker[2] -D -E production -c /var/opt/gitlab/gitlab-rai
hmizuno    1481   1393  0 22:53 ?        00:00:00 sshd: hmizuno@pts/0
hmizuno    1484   1481  0 22:53 pts/0    00:00:00 -bash
root       1508      1  0 22:53 ?        00:00:00 /usr/sbin/abrt-dbus -t133
gitlab-+   1563   1024  0 22:54 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
gitlab-+   1569   1024  0 22:54 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
git        1589   1020  0 22:54 ?        00:00:00 sleep 1
hmizuno    1591   1484  0 22:54 pts/0    00:00:00 ps -ef


[hmizuno@gitlab-01 ~]$ ps -ef |grep gitl
root        829      1  0 22:52 ?        00:00:00 /sbin/dhclient -q -lf /var/lib/dhclient/dhclient--eth0.lease -pf /var/run/dhclient-eth0.pid -H gitlab-01 eth0
root        999      1  0 22:52 ?        00:00:00 runsvdir -P /opt/gitlab/service log: ...........................................................................................................................................................................................................................................................................................................................................................................................................
root       1013   1012  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/redis
gitlab-+   1014   1012  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/redis-server 127.0.0.1:0
root       1018   1016  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/unicorn
root       1019   1017  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/sidekiq
git        1020   1016  0 22:52 ?        00:00:00 /bin/bash /opt/gitlab/embedded/bin/gitlab-unicorn-wrapper
git        1021   1017 30 22:52 ?        00:00:43 sidekiq 5.2.5 gitlab-rails [0 of 25 busy]
root       1022    999  0 22:52 ?        00:00:00 runsv gitlab-workhorse
root       1023   1015  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/postgresql
gitlab-+   1024   1015  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/postgres -D /var/opt/gitlab/postgresql/data
root       1029   1022  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/gitlab-workhorse
git        1030   1022  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/gitlab-workhorse -listenNetwork unix -listenUmask 0 -listenAddr /var/opt/gitlab/gitlab-workhorse/socket -authBackend http://localhost:8080 -authSocket /var/opt/gitlab/gitlab-rails/sockets/gitlab.socket -documentRoot /opt/gitlab/embedded/service/gitlab-rails/public -pprofListenAddr  -prometheusListenAddr localhost:9229 -secretPath /opt/gitlab/embedded/service/gitlab-rails/.gitlab_workhorse_secret -config config.toml
root       1034    999  0 22:52 ?        00:00:00 runsv gitlab-monitor
root       1037   1033  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/node-exporter
gitlab-+   1038   1033  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/node_exporter --web.listen-address=localhost:9100 --collector.textfile.directory=/var/opt/gitlab/node-exporter/textfile_collector
root       1041   1032  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/gitaly
git        1042   1032  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/gitaly /var/opt/gitlab/gitaly/config.toml
root       1043   1034  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/gitlab-monitor
git        1044   1034  1 22:52 ?        00:00:01 puma 3.12.0 (tcp://localhost:9168) [gitlab-monitor]
root       1045   1035  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/redis-exporter
root       1046   1036  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/prometheus
gitlab-+   1047   1036  6 22:52 ?        00:00:09 /opt/gitlab/embedded/bin/prometheus --web.listen-address=localhost:9090 --storage.tsdb.path=/var/opt/gitlab/prometheus/data --config.file=/var/opt/gitlab/prometheus/prometheus.yml
root       1048   1039  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/alertmanager
gitlab-+   1049   1039  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/alertmanager --web.listen-address=localhost:9093 --storage.path=/var/opt/gitlab/alertmanager/data --config.file=/var/opt/gitlab/alertmanager/alertmanager.yml
root       1054   1031  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/logrotate
root       1055   1031  0 22:52 ?        00:00:00 /bin/sh /opt/gitlab/embedded/bin/gitlab-logrotate-wrapper
gitlab-+   1056   1035  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/redis_exporter --web.listen-address=localhost:9121 --redis.addr=unix:///var/opt/gitlab/redis/redis.socket
root       1057   1028  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/nginx
root       1058   1040  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/postgres-exporter
gitlab-+   1059   1040  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/postgres_exporter --web.listen-address=localhost:9187 --extend.query-path=/var/opt/gitlab/postgres-exporter/queries.yaml
root       1060   1028  0 22:52 ?        00:00:00 nginx: master process /opt/gitlab/embedded/sbin/nginx -p /var/opt/gitlab/nginx
gitlab-+   1126   1060  0 22:52 ?        00:00:00 nginx: worker process
gitlab-+   1127   1060  0 22:52 ?        00:00:00 nginx: worker process
gitlab-+   1128   1060  0 22:52 ?        00:00:00 nginx: cache manager process
gitlab-+   1154   1024  0 22:52 ?        00:00:00 postgres: checkpointer process
gitlab-+   1155   1024  0 22:52 ?        00:00:00 postgres: writer process
gitlab-+   1156   1024  0 22:52 ?        00:00:00 postgres: wal writer process
gitlab-+   1157   1024  0 22:52 ?        00:00:00 postgres: autovacuum launcher process
gitlab-+   1158   1024  0 22:52 ?        00:00:00 postgres: stats collector process
git        1188   1042  2 22:52 ?        00:00:02 ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby 1042 /tmp/gitaly-ruby122251670/socket.0
git        1193   1042  2 22:52 ?        00:00:02 ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby 1042 /tmp/gitaly-ruby122251670/socket.1
gitlab-+   1204   1024  0 22:52 ?        00:00:00 postgres: gitlab-psql postgres [local] idle
git        1210      1 37 22:52 ?        00:00:43 unicorn master -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
gitlab-+   1315   1024  0 22:52 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
gitlab-+   1320   1024  0 22:52 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
gitlab-+   1322   1024  0 22:52 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
git        1443   1210  0 22:53 ?        00:00:00 unicorn worker[0] -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
git        1446   1210  0 22:53 ?        00:00:00 unicorn worker[1] -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
git        1449   1210  0 22:53 ?        00:00:00 unicorn worker[2] -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
gitlab-+   1563   1024  0 22:54 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
gitlab-+   1569   1024  0 22:54 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
hmizuno    1626   1484  0 22:54 pts/0    00:00:00 grep --color=auto gitl


[hmizuno@gitlab-01 ~]$ ps -ef |grep ^gitlab
gitlab-+   1014   1012  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/redis-server 127.0.0.1:0
gitlab-+   1024   1015  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/postgres -D /var/opt/gitlab/postgresql/data
gitlab-+   1038   1033  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/node_exporter --web.listen-address=localhost:9100 --collector.textfile.directory=/var/opt/gitlab/node-exporter/textfile_collector
gitlab-+   1047   1036  6 22:52 ?        00:00:09 /opt/gitlab/embedded/bin/prometheus --web.listen-address=localhost:9090 --storage.tsdb.path=/var/opt/gitlab/prometheus/data --config.file=/var/opt/gitlab/prometheus/prometheus.yml
gitlab-+   1049   1039  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/alertmanager --web.listen-address=localhost:9093 --storage.path=/var/opt/gitlab/alertmanager/data --config.file=/var/opt/gitlab/alertmanager/alertmanager.yml
gitlab-+   1056   1035  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/redis_exporter --web.listen-address=localhost:9121 --redis.addr=unix:///var/opt/gitlab/redis/redis.socket
gitlab-+   1059   1040  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/postgres_exporter --web.listen-address=localhost:9187 --extend.query-path=/var/opt/gitlab/postgres-exporter/queries.yaml
gitlab-+   1126   1060  0 22:52 ?        00:00:00 nginx: worker process
gitlab-+   1127   1060  0 22:52 ?        00:00:00 nginx: worker process
gitlab-+   1128   1060  0 22:52 ?        00:00:00 nginx: cache manager process
gitlab-+   1154   1024  0 22:52 ?        00:00:00 postgres: checkpointer process
gitlab-+   1155   1024  0 22:52 ?        00:00:00 postgres: writer process
gitlab-+   1156   1024  0 22:52 ?        00:00:00 postgres: wal writer process
gitlab-+   1157   1024  0 22:52 ?        00:00:00 postgres: autovacuum launcher process
gitlab-+   1158   1024  0 22:52 ?        00:00:00 postgres: stats collector process
gitlab-+   1204   1024  0 22:52 ?        00:00:00 postgres: gitlab-psql postgres [local] idle
gitlab-+   1315   1024  0 22:52 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
gitlab-+   1320   1024  0 22:52 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
gitlab-+   1322   1024  0 22:52 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
gitlab-+   1563   1024  0 22:54 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle
gitlab-+   1569   1024  0 22:54 ?        00:00:00 postgres: gitlab gitlabhq_production [local] idle


[hmizuno@gitlab-01 ~]$ ps -ef |grep gitlab |grep -v ^gitlab |grep gitlab
root        829      1  0 22:52 ?        00:00:00 /sbin/dhclient -q -lf /var/lib/dhclient/dhclient--eth0.lease -pf /var/run/dhclient-eth0.pid -H gitlab-01 eth0
root        999      1  0 22:52 ?        00:00:00 runsvdir -P /opt/gitlab/service log: ...........................................................................................................................................................................................................................................................................................................................................................................................................
root       1013   1012  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/redis
root       1018   1016  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/unicorn
root       1019   1017  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/sidekiq
git        1020   1016  0 22:52 ?        00:00:00 /bin/bash /opt/gitlab/embedded/bin/gitlab-unicorn-wrapper
git        1021   1017 20 22:52 ?        00:00:44 sidekiq 5.2.5 gitlab-rails [0 of 25 busy]
root       1022    999  0 22:52 ?        00:00:00 runsv gitlab-workhorse
root       1023   1015  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/postgresql
root       1029   1022  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/gitlab-workhorse
git        1030   1022  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/gitlab-workhorse -listenNetwork unix -listenUmask 0 -listenAddr /var/opt/gitlab/gitlab-workhorse/socket -authBackend http://localhost:8080 -authSocket /var/opt/gitlab/gitlab-rails/sockets/gitlab.socket -documentRoot /opt/gitlab/embedded/service/gitlab-rails/public -pprofListenAddr  -prometheusListenAddr localhost:9229 -secretPath /opt/gitlab/embedded/service/gitlab-rails/.gitlab_workhorse_secret -config config.toml
root       1034    999  0 22:52 ?        00:00:00 runsv gitlab-monitor
root       1037   1033  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/node-exporter
root       1041   1032  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/gitaly
git        1042   1032  0 22:52 ?        00:00:00 /opt/gitlab/embedded/bin/gitaly /var/opt/gitlab/gitaly/config.toml
root       1043   1034  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/gitlab-monitor
git        1044   1034  1 22:52 ?        00:00:02 puma 3.12.0 (tcp://localhost:9168) [gitlab-monitor]
root       1045   1035  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/redis-exporter
root       1046   1036  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/prometheus
root       1048   1039  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/alertmanager
root       1054   1031  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/logrotate
root       1055   1031  0 22:52 ?        00:00:00 /bin/sh /opt/gitlab/embedded/bin/gitlab-logrotate-wrapper
root       1057   1028  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/nginx
root       1058   1040  0 22:52 ?        00:00:00 svlogd -tt /var/log/gitlab/postgres-exporter
root       1060   1028  0 22:52 ?        00:00:00 nginx: master process /opt/gitlab/embedded/sbin/nginx -p /var/opt/gitlab/nginx
git        1188   1042  1 22:52 ?        00:00:02 ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby 1042 /tmp/gitaly-ruby122251670/socket.0
git        1193   1042  1 22:52 ?        00:00:02 ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby 1042 /tmp/gitaly-ruby122251670/socket.1
git        1210      1 22 22:52 ?        00:00:43 unicorn master -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
git        1443   1210  0 22:53 ?        00:00:00 unicorn worker[0] -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
git        1446   1210  0 22:53 ?        00:00:00 unicorn worker[1] -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
git        1449   1210  0 22:53 ?        00:00:00 unicorn worker[2] -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
hmizuno    1801   1484  0 22:55 pts/0    00:00:00 grep --color=auto gitlab
hmizuno    1802   1484  0 22:55 pts/0    00:00:00 grep --color=auto -v ^gitlab
hmizuno    1803   1484  0 22:55 pts/0    00:00:00 grep --color=auto gitlab
[hmizuno@gitlab-01 ~]$



[hmizuno@gitlab-01 ~]$ ps -ef |grep gitlab |cut -c51-
/sbin/dhclient -q -lf /var/lib/dhclient/dhclient--eth0.lease -pf /var/run/dhclient-eth0.pid -H gitlab-01 eth0
runsvdir -P /opt/gitlab/service log: ...........................................................................................................................................................................................................................................................................................................................................................................................................
svlogd -tt /var/log/gitlab/redis
/opt/gitlab/embedded/bin/redis-server 127.0.0.1:0
svlogd -tt /var/log/gitlab/unicorn
svlogd -tt /var/log/gitlab/sidekiq
/bin/bash /opt/gitlab/embedded/bin/gitlab-unicorn-wrapper
sidekiq 5.2.5 gitlab-rails [0 of 25 busy]
runsv gitlab-workhorse
svlogd -tt /var/log/gitlab/postgresql
/opt/gitlab/embedded/bin/postgres -D /var/opt/gitlab/postgresql/data
svlogd -tt /var/log/gitlab/gitlab-workhorse
/opt/gitlab/embedded/bin/gitlab-workhorse -listenNetwork unix -listenUmask 0 -listenAddr /var/opt/gitlab/gitlab-workhorse/socket -authBackend http://localhost:8080 -authSocket /var/opt/gitlab/gitlab-rails/sockets/gitlab.socket -documentRoot /opt/gitlab/embedded/service/gitlab-rails/public -pprofListenAddr  -prometheusListenAddr localhost:9229 -secretPath /opt/gitlab/embedded/service/gitlab-rails/.gitlab_workhorse_secret -config config.toml
runsv gitlab-monitor
svlogd -tt /var/log/gitlab/node-exporter
/opt/gitlab/embedded/bin/node_exporter --web.listen-address=localhost:9100 --collector.textfile.directory=/var/opt/gitlab/node-exporter/textfile_collector
svlogd -tt /var/log/gitlab/gitaly
/opt/gitlab/embedded/bin/gitaly /var/opt/gitlab/gitaly/config.toml
svlogd -tt /var/log/gitlab/gitlab-monitor
puma 3.12.0 (tcp://localhost:9168) [gitlab-monitor]
svlogd -tt /var/log/gitlab/redis-exporter
svlogd -tt /var/log/gitlab/prometheus
/opt/gitlab/embedded/bin/prometheus --web.listen-address=localhost:9090 --storage.tsdb.path=/var/opt/gitlab/prometheus/data --config.file=/var/opt/gitlab/prometheus/prometheus.yml
svlogd -tt /var/log/gitlab/alertmanager
/opt/gitlab/embedded/bin/alertmanager --web.listen-address=localhost:9093 --storage.path=/var/opt/gitlab/alertmanager/data --config.file=/var/opt/gitlab/alertmanager/alertmanager.yml
svlogd -tt /var/log/gitlab/logrotate
/bin/sh /opt/gitlab/embedded/bin/gitlab-logrotate-wrapper
/opt/gitlab/embedded/bin/redis_exporter --web.listen-address=localhost:9121 --redis.addr=unix:///var/opt/gitlab/redis/redis.socket
svlogd -tt /var/log/gitlab/nginx
svlogd -tt /var/log/gitlab/postgres-exporter
/opt/gitlab/embedded/bin/postgres_exporter --web.listen-address=localhost:9187 --extend.query-path=/var/opt/gitlab/postgres-exporter/queries.yaml
nginx: master process /opt/gitlab/embedded/sbin/nginx -p /var/opt/gitlab/nginx
nginx: worker process
nginx: worker process
nginx: cache manager process
postgres: checkpointer process
postgres: writer process
postgres: wal writer process
postgres: autovacuum launcher process
postgres: stats collector process
ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby 1042 /tmp/gitaly-ruby122251670/socket.0
ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby 1042 /tmp/gitaly-ruby122251670/socket.1
postgres: gitlab-psql postgres [local] idle
unicorn master -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
unicorn worker[0] -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
unicorn worker[1] -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
unicorn worker[2] -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
grep --color=auto gitlab
[hmizuno@gitlab-01 ~]$ ps -ef |grep gitlab |cut -c51- |sort
/bin/bash /opt/gitlab/embedded/bin/gitlab-unicorn-wrapper
/bin/sh /opt/gitlab/embedded/bin/gitlab-logrotate-wrapper
grep --color=auto gitlab
nginx: cache manager process
nginx: master process /opt/gitlab/embedded/sbin/nginx -p /var/opt/gitlab/nginx
nginx: worker process
nginx: worker process
/opt/gitlab/embedded/bin/alertmanager --web.listen-address=localhost:9093 --storage.path=/var/opt/gitlab/alertmanager/data --config.file=/var/opt/gitlab/alertmanager/alertmanager.yml
/opt/gitlab/embedded/bin/gitaly /var/opt/gitlab/gitaly/config.toml
/opt/gitlab/embedded/bin/gitlab-workhorse -listenNetwork unix -listenUmask 0 -listenAddr /var/opt/gitlab/gitlab-workhorse/socket -authBackend http://localhost:8080 -authSocket /var/opt/gitlab/gitlab-rails/sockets/gitlab.socket -documentRoot /opt/gitlab/embedded/service/gitlab-rails/public -pprofListenAddr  -prometheusListenAddr localhost:9229 -secretPath /opt/gitlab/embedded/service/gitlab-rails/.gitlab_workhorse_secret -config config.toml
/opt/gitlab/embedded/bin/node_exporter --web.listen-address=localhost:9100 --collector.textfile.directory=/var/opt/gitlab/node-exporter/textfile_collector
/opt/gitlab/embedded/bin/postgres -D /var/opt/gitlab/postgresql/data
/opt/gitlab/embedded/bin/postgres_exporter --web.listen-address=localhost:9187 --extend.query-path=/var/opt/gitlab/postgres-exporter/queries.yaml
/opt/gitlab/embedded/bin/prometheus --web.listen-address=localhost:9090 --storage.tsdb.path=/var/opt/gitlab/prometheus/data --config.file=/var/opt/gitlab/prometheus/prometheus.yml
/opt/gitlab/embedded/bin/redis_exporter --web.listen-address=localhost:9121 --redis.addr=unix:///var/opt/gitlab/redis/redis.socket
/opt/gitlab/embedded/bin/redis-server 127.0.0.1:0
postgres: autovacuum launcher process
postgres: checkpointer process
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab-psql postgres [local] idle
postgres: stats collector process
postgres: wal writer process
postgres: writer process
puma 3.12.0 (tcp://localhost:9168) [gitlab-monitor]
ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby 1042 /tmp/gitaly-ruby122251670/socket.0
ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby 1042 /tmp/gitaly-ruby122251670/socket.1
runsvdir -P /opt/gitlab/service log: ...........................................................................................................................................................................................................................................................................................................................................................................................................
runsv gitlab-monitor
runsv gitlab-workhorse
/sbin/dhclient -q -lf /var/lib/dhclient/dhclient--eth0.lease -pf /var/run/dhclient-eth0.pid -H gitlab-01 eth0
sidekiq 5.2.5 gitlab-rails [0 of 25 busy]
svlogd -tt /var/log/gitlab/alertmanager
svlogd -tt /var/log/gitlab/gitaly
svlogd -tt /var/log/gitlab/gitlab-monitor
svlogd -tt /var/log/gitlab/gitlab-workhorse
svlogd -tt /var/log/gitlab/logrotate
svlogd -tt /var/log/gitlab/nginx
svlogd -tt /var/log/gitlab/node-exporter
svlogd -tt /var/log/gitlab/postgres-exporter
svlogd -tt /var/log/gitlab/postgresql
svlogd -tt /var/log/gitlab/prometheus
svlogd -tt /var/log/gitlab/redis
svlogd -tt /var/log/gitlab/redis-exporter
svlogd -tt /var/log/gitlab/sidekiq
svlogd -tt /var/log/gitlab/unicorn
unicorn master -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
unicorn worker[0] -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
unicorn worker[1] -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
unicorn worker[2] -D -E production -c /var/opt/gitlab/gitlab-rails/etc/unicorn.rb /opt/gitlab/embedded/service/gitlab-rails/config.ru
[hmizuno@gitlab-01 ~]$



[hmizuno@gitlab-01 ~]$ ps -ef |grep gitlab |cut -c51-100 |sort
/bin/bash /opt/gitlab/embedded/bin/gitlab-unicorn-
/bin/sh /opt/gitlab/embedded/bin/gitlab-logrotate-
grep --color=auto gitlab
nginx: cache manager process
nginx: master process /opt/gitlab/embedded/sbin/ng
nginx: worker process
nginx: worker process
/opt/gitlab/embedded/bin/alertmanager --web.listen
/opt/gitlab/embedded/bin/gitaly /var/opt/gitlab/gi
/opt/gitlab/embedded/bin/gitlab-workhorse -listenN
/opt/gitlab/embedded/bin/node_exporter --web.liste
/opt/gitlab/embedded/bin/postgres -D /var/opt/gitl
/opt/gitlab/embedded/bin/postgres_exporter --web.l
/opt/gitlab/embedded/bin/prometheus --web.listen-a
/opt/gitlab/embedded/bin/redis_exporter --web.list
/opt/gitlab/embedded/bin/redis-server 127.0.0.1:0
postgres: autovacuum launcher process
postgres: checkpointer process
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab gitlabhq_production [local] idle
postgres: gitlab-psql postgres [local] idle
postgres: stats collector process
postgres: wal writer process
postgres: writer process
puma 3.12.0 (tcp://localhost:9168) [gitlab-monitor
ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/
ruby /opt/gitlab/embedded/service/gitaly-ruby/bin/
runsvdir -P /opt/gitlab/service log: .............
runsv gitlab-monitor
runsv gitlab-workhorse
/sbin/dhclient -q -lf /var/lib/dhclient/dhclient--
sidekiq 5.2.5 gitlab-rails [0 of 25 busy]
svlogd -tt /var/log/gitlab/alertmanager
svlogd -tt /var/log/gitlab/gitaly
svlogd -tt /var/log/gitlab/gitlab-monitor
svlogd -tt /var/log/gitlab/gitlab-workhorse
svlogd -tt /var/log/gitlab/logrotate
svlogd -tt /var/log/gitlab/nginx
svlogd -tt /var/log/gitlab/node-exporter
svlogd -tt /var/log/gitlab/postgres-exporter
svlogd -tt /var/log/gitlab/postgresql
svlogd -tt /var/log/gitlab/prometheus
svlogd -tt /var/log/gitlab/redis
svlogd -tt /var/log/gitlab/redis-exporter
svlogd -tt /var/log/gitlab/sidekiq
svlogd -tt /var/log/gitlab/unicorn
unicorn master -D -E production -c /var/opt/gitlab
unicorn worker[0] -D -E production -c /var/opt/git
unicorn worker[1] -D -E production -c /var/opt/git
unicorn worker[2] -D -E production -c /var/opt/git

```

