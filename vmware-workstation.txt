■communication between guest OS and guest OS

もし、ゲストOS側でネットワークが見えない場合は、NetworkManagerを再起動すれば
NATのネットワークが見えるようになる。

	# systemctl restart NetworkManager
	[root@localhost installer]# ifconfig
	ens33: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
 	       inet 192.168.56.129  netmask 255.255.255.0  。。。

server1 : 192.168.56.129
server2 : 192.168.56.130

■communication between host and guest OS

HOST:
  wget 192.168.56.129/index.html <<< OK !

guest:
  # ifconfig
  ens33: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.56.129  netmask 255.255.255.0  broadcast 192.168.56.255

  virbr0: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500
        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255

  ens33 : 192.168.56.129 : to host route

  # route
  Kernel IP routing table
  Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
  default         gateway         0.0.0.0         UG    100    0        0 ens33
  192.168.56.0    0.0.0.0         255.255.255.0   U     100    0        0 ens33
  192.168.122.0   0.0.0.0         255.255.255.0   U     0      0        0 virbr0

HOST:
  Ethernet adapter VMware Network Adapter VMnet1:
   Description . . . . . . . . . . . : VMware Virtual Ethernet Adapter for VMnet1
   DHCP Enabled. . . . . . . . . . . : No
   Autoconfiguration Enabled . . . . : Yes
   IPv4 Address. . . . . . . . . . . : 192.168.60.1(Preferred) 
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   Default Gateway . . . . . . . . . : 

Ethernet adapter VMware Network Adapter VMnet8:

   Connection-specific DNS Suffix  . : 
   Description . . . . . . . . . . . : VMware Virtual Ethernet Adapter for VMnet8
   DHCP Enabled. . . . . . . . . . . : No
   Autoconfiguration Enabled . . . . : Yes
   IPv4 Address. . . . . . . . . . . : 192.168.56.1(Preferred)  <<<<<<
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   Default Gateway . . . . . . . . . : 



■仮想マシンのクローンを作成

　正式な方法
	１．仮想マシンメニューを右クリックして、「管理」の「クローン」を選択
	２．「仮想マシンの現在の状態」「完全なクローンの作成」を選択
	
　直接的な方法
	１．ディレクトリ全部をコピーする。
	２．*.vmxファイルの以下のエントリを任意の名前にする。
		displayName = "RHEL_6_5_64bit-NO01"
	　　★　表示名なので自由な文字を設定可能
	３．WMwareを起動して、*.vmxファイルをオープンする。
	

■network config:

VMWARE：
	編集　→　仮想ネットワークエディタ
		VMnet8
			NAT
			接続済み
			NAT設定
				ゲートウェイIP：192.168.186.2
			# DNS設定
			#	16.110.135.52
			#	16.110.135.51
				
GuestOS：
	# cat /etc/sysconfig/network-scripts/ifcfg-eth0

	DEVICE=eth0
	TYPE=Ethernet

	DEFROUTE=yes
	GATEWAY=192.168.186.2

	IPADDR=192.168.186.1

	PEERDNS=yes
	DNS1=16.110.135.52
	DNS2=16.110.135.51

# /etc/rc.d/init.d/network restart

##### OK config #####

ゲートウェイIP：192.168.186.2
web proxy : http://autocache.hpecorp.net/

$ cat /etc/sysconfig/network-scripts/ifcfg-eth0
DEVICE="eth0"
BOOTPROTO="dhcp"
HWADDR="00:0C:29:84:50:30"
IPV6INIT="yes"
NM_CONTROLLED="yes"
ONBOOT="yes"
TYPE="Ethernet"
UUID="33339dcf-5578-4d3c-8e2d-d166be2be37f"

$ cat /etc/resolv.conf
# Generated by NetworkManager
domain localdomain
search localdomain
nameserver 192.168.186.2 <<<<<

$ ifconfig
eth0      Link encap:Ethernet  HWaddr 00:0C:29:84:50:30
	  inet addr:192.168.186.129  Bcast:192.168.186.255  Mask:255.255.255.0
	  addr: fe80::20c:29ff:fe84:5030/64 Scope:Link



	
仮想ネットワーク コンポーネントについて

●仮想スイッチ

　物理スイッチと同様。仮想ネットワークとも呼ばれる。

　ネットワーク種類 スイッチ名

　ブリッジ 	   VMnet0
　NAT		   VMnet8
　ホストオンリー   VMnet1

　仮想スイッチ数
	Windows：20個
	Linux：255個

　仮想ネットワークデバイス数
	Windows：無制限
	Linux：32個

●仮想ネットワークアダプタ

仮想マシンを作るとき、仮想マシンの仮想ネットワークアダプタを作成する。
仮想マシンアダプタは、以下どちらかかでゲストOSに認識される。
	AMD PCNET PCI アダプタ
	Intel Pro/1000 MT サーバ アダプタ

Windows Vista および Windows 7、Windows 8 ゲスト OS では、
	Intel Pro/1000 MT サーバ アダプタとして認識されます。

Workstation 6.0 以降の仮想マシンには、
	    最大 10 個の仮想ネットワーク アダプタを設定できる。
	    Workstation 5.x 仮想マシンでは、3 つまで使用できる。

●仮想DHCP

File Edit Options Buffers Tools Text Help
仮想ネットワーク コンポーネントについて

● 仮想スイッチ

　物理スイッチと同様。仮想ネットワークとも呼ばれる。

　ネットワーク種類 スイッチ名
　ブリッジ         VMnet0
　NAT              VMnet8
　ホストオンリー   VMnet1

　仮想スイッチ数
        Windows：20個
	        Linux：255個

　仮想ネットワークデバイス数
        Windows：無制限
	        Linux：32個

●仮想ネットワークアダプタ

仮想マシンを作るとき、仮想マシンの仮想ネットワークアダプタを作成する。
仮想マシンアダプタは、以下どちらかかでゲストOSに認識される。
        AMD PCNET PCI アダプタ
	        Intel Pro/1000 MT サーバ アダプタ

Windows Vista および Windows 7、Windows 8 ゲスト OS では、
        Intel Pro/1000 MT サーバ アダプタとして認識されます。

Workstation 6.0 以降の仮想マシンには、
            最大 10 個の仮想ネットワーク アダプタを設定できる。
	                Workstation 5.x 仮想マシンでは、3 つまで使用できる。

●仮想DHCP

外部ネットワークにブリッジされていない構成において、
仮想マシンに IP アドレスを提供する。
	
仮想 DHCP サーバは、ホストオンリー構成と
NAT 構成の仮想マシンに IP アドレスを割り当てる。

●NATデバイス

NAT デバイスは各仮想マシンと外部ネットワーク間における
ネットワーク データを渡し、各仮想マシンに送られてくる
データ パケットを的確に識別し、該当する仮想マシンに送信する。



■一般的なネットワーク構成

ブリッジ ネットワーク、NAT、ホストオンリー ネットワークを構成可能。
カスタム仮想ネットワークも構成可能。

●ブリッジ ネットワークを使用

ブリッジ ネットワーク（VMnet0）が設定されます。

ホスト システムのネットワーク アダプタを使用して
仮想マシンをネットワークに接続する。

ホスト システムがネットワークに接続されている場合、
一般的にブリッジ ネットワークは仮想マシンをネットワークに
アクセスさせる最も簡単な方法です。



●NAT ネットワーク

NAT ネットワーク（VMnet8）が設定される。

仮想マシンは外部ネットワークに独自の IP アドレスを持たない。
代わりに、独立したプライベート ネットワークがホスト システムで設定される。

デフォルトの構成では、仮想マシンはこのプライベート ネットワーク上の
アドレスを仮想 DHCP サーバから取得する。

仮想マシンとホスト システムが 1 つのネットワーク ID を共有する。
このネットワーク ID は、外部ネットワークからは見えません。

[新規仮想マシン] ウィザードで、仮想マシンを新規作成して標準構成タイプを
選択すると、デフォルトの NAT ネットワークを使用するように仮想マシンが
構成される。

設定できる NAT ネットワークは 1 つだけです。

構成ファイル：C:\ProgramData\VMware\vmnetnat.conf


●ホストオンリー（Host-Only）ネットワーク

ホスト コンピュータ内部で完結するネットワークを作成します。

ホストオンリー ネットワークは、ホスト OS に表示される
仮想ネットワーク アダプタを使用して、仮想マシンと
ホスト システムとの通信を実現します。

ホストオンリー ネットワーク（VVMnet1）が構築されます。

●カスタム ネットワーク構成

高度な仮想ネットワークを構築できる。

仮想ネットワークは、1 つ以上の外部ネットワークに接続したり、
ホスト システム上で全体を実行したりすることもできます。

仮想ネットワーク エディタを使用してホスト システム上の
複数のネットワーク カードを構成し、複数の仮想ネットワークを作成できます。

